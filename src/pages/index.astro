---
import Badge from '@components/ui/Badge.astro';
import Button from '@components/ui/Button.astro';
import Card from '@components/ui/Card.astro';
import Container from '@components/ui/Container.astro';
import Layout from '@layouts/Layout.astro';
import { getAllPosts } from '@lib/content/posts.ts';

const posts = await getAllPosts({ includeDrafts: false });
const latest = posts.slice(0, 3);
const title = 'algoro.dev - Home';
const description = 'Personal site, projects, and latest writing.';
---

<Layout title={title} description={description}>
  <section class="py-20 text-center">
    <Container>
      <h1 class="text-4xl font-bold">
        Hi, I’m <span class="text-primary">Alejandro Gonzalez Romero</span>
      </h1>
      <p class="mt-4 text-xl opacity-80">Senior Software Engineer · Code, Cloud & AI</p>
      <div class="mt-8 flex flex-wrap justify-center gap-4">
        <Button variant="primary" href="/blog">Read the Blog</Button>
        <Button variant="ghost" href="/about">About Me</Button>
      </div>
    </Container>
  </section>
  <section class="bg-[var(--color-muted)] py-12 dark:bg-[var(--color-card)]">
    <Container class="grid gap-8 sm:grid-cols-3">
      <Card class="p-6 text-center">
        <h3 class="text-xl font-semibold">Experience</h3>
        <p class="text-primary mt-2 text-4xl font-bold">7+</p>
        <p class="opacity-70">years in software development</p>
      </Card>
      <Card class="p-6 text-center">
        <h3 class="text-xl font-semibold">Posts</h3>
        <p class="text-primary mt-2 text-4xl font-bold">{posts.length}</p>
        <p class="opacity-70">published posts</p>
      </Card>
      <Card class="p-6 text-center">
        <h3 class="text-xl font-semibold">Stack</h3>
        <div class="mt-3 flex flex-wrap justify-center gap-2">
          <Badge variant="accent">JS/TS</Badge>
          <Badge variant="accent">Python</Badge>
          <Badge variant="accent">Nuxt/Next</Badge>
          <Badge variant="accent">TailwindCSS</Badge>
          <Badge variant="accent">Vitest</Badge>
          <Badge variant="accent">Playwright</Badge>
          <Badge variant="accent">PostgreSQL</Badge>
          <Badge variant="accent">MongoDB</Badge>
          <Badge variant="accent">Docker</Badge>
          <Badge variant="accent">Kubernetes</Badge>
        </div>
      </Card>
    </Container>
  </section>
  <section class="bg-[var(--color-muted)] py-16 dark:bg-[var(--color-card)]">
    <Container>
      <h2 class="text-2xl font-semibold">Latest Posts</h2>
      <div class="mt-8 grid gap-6 sm:grid-cols-2 md:grid-cols-3">
        {
          latest.map((p) => (
            <Card as="article" class="flex flex-col p-4">
              <h3 class="text-lg font-semibold">
                <a href={`/blog/${p.slug}`} class="text-[var(--color-primary)] hover:underline">
                  {p.title}
                </a>
              </h3>
              {p.publishedAt && (
                <div class="mt-1 text-sm opacity-70">{new Date(p.publishedAt).toLocaleDateString()}</div>
              )}
              {p.description && <p class="mt-2 line-clamp-3 opacity-80">{p.description}</p>}
              <Button variant="subtle" href={`/blog/${p.slug}`} class="mt-auto pt-4">
                Read
              </Button>
            </Card>
          ))
        }
      </div>
      <div class="mt-6">
        <a href="/blog" class="mt-6 text-[var(--color-primary)] hover:underline">View all posts →</a
        >
      </div>
    </Container>
  </section>
  <section class="py-16">
    <Container class="text-center">
      <h2 class="text-2xl font-semibold">Connect with me</h2>
      <p class="mt-4 opacity-80">I’m always open to new projects and collaborations.</p>
      <div class="mt-6 flex flex-wrap justify-center gap-4">
        <a
          href="https://github.com/algorodev"
          class="text-[var(--color-primary)] hover:underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          GitHub
        </a>
        <a
          href="https://www.linkedin.com/in/algorodev/"
          class="text-[var(--color-primary)] hover:underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          LinkedIn
        </a>
        <a href="mailto:me@algoro.dev" class="text-[var(--color-primary)] hover:underline">
          Email
        </a>
      </div>
    </Container>
  </section>
</Layout>
